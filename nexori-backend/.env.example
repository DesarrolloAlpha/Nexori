# ==========================================
# NEXORI BACKEND - Variables de entorno
# Copia este archivo como .env y completa los valores
# NUNCA subas .env al repositorio
# ==========================================

# Entorno: development | production
NODE_ENV=development

# Puerto del servidor
PORT=3000

# URL pública del servidor (usada para QR codes en producción)
SERVER_URL=https://tu-dominio.com

# ==========================================
# BASE DE DATOS - PostgreSQL
# ==========================================
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=CAMBIAR_PASSWORD_SEGURO
DB_DATABASE=nexori_db

# ==========================================
# TYPEORM
# ADVERTENCIA: TYPEORM_SYNCHRONIZE=true en producción
# puede borrar o modificar tablas automáticamente.
# Usar migraciones en producción.
# ==========================================
TYPEORM_SYNCHRONIZE=false
TYPEORM_LOGGING=false

# ==========================================
# JWT - Autenticación
# Usar strings aleatorios largos y seguros (min. 64 chars)
# Generar con: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# ==========================================
JWT_SECRET=CAMBIAR_POR_UN_SECRET_LARGO_Y_ALEATORIO
JWT_REFRESH_SECRET=CAMBIAR_POR_OTRO_SECRET_LARGO_Y_ALEATORIO
JWT_EXPIRES_IN=1d
JWT_REFRESH_EXPIRES_IN=7d

# ==========================================
# CORS
# En producción: lista separada por comas de los orígenes permitidos
# Ejemplo: https://app.nexori.com,https://admin.nexori.com
# ==========================================
ALLOWED_ORIGINS=http://localhost:8081,http://localhost:3001

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# ==========================================
# WHATSAPP BUSINESS API - META
# ==========================================
WHATSAPP_API_URL=https://graph.facebook.com/v21.0
WHATSAPP_PHONE_NUMBER_ID=ID_DEL_NUMERO_DE_WHATSAPP
WHATSAPP_ACCESS_TOKEN=TOKEN_DE_ACCESO_META
WHATSAPP_BUSINESS_ACCOUNT_ID=ID_CUENTA_BUSINESS

# Número de prueba para desarrollo (formato sin + ni espacios)
WHATSAPP_TEST_NUMBER=573000000000

# Webhook — el verify token puede ser cualquier string, debe coincidir EXACTO con el que pongas en Meta
WHATSAPP_WEBHOOK_VERIFY_TOKEN=nexori_verify_2026

# App Secret — lo encuentras en Meta > Tu App > Configuración básica > Clave secreta de la app
# Con esto se valida la firma HMAC-SHA256 de los eventos entrantes (seguridad en producción)
WHATSAPP_APP_SECRET=CLAVE_SECRETA_DE_TU_APP_META

# ==========================================
# ADMIN POR DEFECTO
# Se crea en el primer arranque si no existe admin@nexori.com
# En Render: configurar manualmente en el dashboard (Environment)
# ==========================================
ADMIN_DEFAULT_PASSWORD=CAMBIAR_PASSWORD_ADMIN_SEGURO

# ==========================================
# UPLOADS
# ==========================================
UPLOAD_TEMP_DIR=./temp_uploads
